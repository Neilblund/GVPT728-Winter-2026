---
title: "Homework 1"
format:
  html:
    theme: [default, custom_styles]
    df-print: paged
    smaller: true
    toc: true
    toc-location: left
    toc-depth: 3
    embed-resources: true
    code-link: true
    code-tools: true
code-annotations: select
---

```{r setup, include=FALSE }
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)
```

## Required libraries

```{r}
library(tidyverse)
library(tidycensus)

```

Use the [FiveThirtyEight presidential elections data](https://raw.githubusercontent.com/fivethirtyeight/election-results/main/election_results_presidential.csv) to answer the following questions about the 2020 general election results.

Remember that you can load this from R by running:

```{r, eval=FALSE}

url<-"https://raw.githubusercontent.com/fivethirtyeight/election-results/main/election_results_presidential.csv"
presidential_elections<-read_csv(url)

voteshares <-presidential_elections|>
  filter(office_name=="U.S. President" & cycle==2020 & stage=="general")|>
  filter(candidate_name %in% c("Joe Biden", "Donald Trump"))|>
  filter(!str_detect(state, " CD-\\d+"))|>
  group_by(state, candidate_name)|>
  summarise(votes=sum(votes,na.rm =T))|>
  pivot_wider(names_from = candidate_name, values_from = votes)|>
    mutate(`Biden Share`=`Joe Biden`/(`Joe Biden`+`Donald Trump`))

```


## Question 1

Use the following code to download demographics for each state from the American Community Survey and then use a join to add this column to your data.

```{r}

acs_data <- get_acs(geography = "state", 
                         variables = c(median_income = "B19013_001",
                                       bachelors_degree = "B15003_022",
                                       pop = "B01001_001",
                                       white_pop = "B02001_002"
                                       ), 
                         year = 2020)
```

(note: you can ignore the "moe" column and just use the estimates. You'll need to use `pivot_wider` to put these into wide format with one row per state)


## Question 2

Run a linear regression to calculate the effect of median income on Biden's statewide two party vote share. Produce a formatted table to display your results and briefly discuss your findings.


```{r}
# Q3

```



## Question 3

Run the previous model, but include Bachelor's degrees and population. Put your results in a formatted table and assess your results. 

```{r}


```


## Question 4

Check your model for heteroskedasticity, non-linearity, or influential outliers. Discuss your interpretation.

```{r}


```

